@using HalloDal.Models.AC
@using Hallo.Resources
@using System.Linq

@{
    ViewBag.Title = ViewBag.Headline;
}

@(Html.Kendo().Grid<AcDate>()
    .Name("DateGrid")
    .Columns(c => {
        c.Bound(x => x.Date).Title(Labels.Date).Width(200).EditorTemplateName("DateTime").Format("{0:dd-MM-yyyy}"); 
        c.Command(cmd => { cmd.Destroy(); cmd.Edit(); }).Width(250);
    })
    .ToolBar(toolbar => {
        toolbar.Create();
    })
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .HtmlAttributes(new { style = "width: 350px;" })
    .Sortable()
    .Editable()
    .DataSource(source => source
        .Ajax()
        .Model(m => m.Id(date => date.Id))
        .Read(read => read.Action("GetDates", "AcDate"))
        .Update(c => c.Action("UpdateDate", "AcDate"))
        .Create(c => c.Action("CreateDate", "AcDate"))
        .Destroy(c => c.Action("DeleteDate", "AcDate"))
    )
) 

<script>
    function db(e) {
        var grid = this;
        $(".templateCell").each(function () {
            eval($(this).children("script").last().html());
            var tr = $(this).closest('tr');
            var item = grid.dataItem(tr);
            kendo.bind($(this), item);
        });
    }

    function parameter() {
        return {
            date: $("#NewDate").val()
        };
    }
</script>